% -*- mode: erlang -*-
{require_min_otp_vsn, "R18"}.

{deps, []}.

{project_app_dirs,
 [
  ".",
  "apps/erocci_core",
  "apps/erocci_authnz",
  "apps/erocci_authnz_htpasswd",
  "apps/erocci_backend_admin",
  "apps/erocci_backend_fs",
  "apps/erocci_backend_dbus",
  "apps/erocci_backend_mnesia",
  "apps/erocci_listener_http",
  "apps/erocci_listener_xmpp"
 ]}.

{plugins, 
 [
  {pc, {git, "git@github.com:blt/port_compiler.git", {branch, "master"}}},
  {econfig, {git, "https://github.com/erocci/econfig.git", {branch, "master"}}}
 ]}.

{provider_hooks,
 [
  {pre, [{compile, {econfig, template}}]},
  {post, [{clean, {econfig, clean}}]}
 ]}.

{econfig,
 [
  {model, 
   [
	{listener_xmpp,   "Enable XMPP listener",                   boolean, false, []},
	{listener_http,   "Enable HTTP listener",                   boolean, true,  []},
	{backend_admin,   "Enable admin backend",                   boolean, false, []},
	{backend_dbus,    "Enable D-Bus backend",                   boolean, true, []},
	{backend_fs,      "Enable fs backend",                      boolean, false, []},
	{backend_mnesia,  "Enable mnesia (DB) backend",             boolean, true, []},
	{authnz_htpasswd, "Enable htpassword based authentication", boolean, false, []}
   ]},
  {files, ["rebar.config"]}
 ]}.
